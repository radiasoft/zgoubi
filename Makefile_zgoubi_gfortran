CFLAGS=-g -DGFORTRAN4
FC=gfortran
FFLAGS=-O4 -Wall -fno-automatic -pedantic -cpp

.POSIX:

all :
	cd modules ;  make CFLAGS="$(CFLAGS)" FC="$(FC)" FFLAGS="$(FFLAGS)"
	cd common ; rm libzg.a || true  ; make CFLAGS="$(CFLAGS)" FC="$(FC)" FFLAGS="$(FFLAGS)"
	cd zgoubi ; make CFLAGS="$(CFLAGS)" FC="$(FC)" FFLAGS="$(FFLAGS)"
	cd zpop ; make CFLAGS="$(CFLAGS)" FC="$(FC)" FFLAGS="$(FFLAGS)"
	cd guide ; make

clean :
	$(RM) *~
	cd modules ;  make clean
	cd common ;  make clean
	cd zgoubi/coupling ; make clean
	cd zgoubi ;  make clean
	cd zpop/liblns ; $(MAKE) clean
	cd zpop ; $(MAKE) clean
	cd guide ; $(MAKE) clean

